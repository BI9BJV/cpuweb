# 树莓派系统监控与温度控制套件

这是一套完整的树莓派系统监控与温度控制解决方案，包含两个核心组件：

## 组件概述

### 1. CPUWeb 系统监控平台
- **功能**：提供Web界面的系统监控，包括CPU、内存、磁盘、网络等信息
- **特性**：
  - 实时监控系统各项指标
  - CRT风格的现代化Web界面
  - 文件管理功能
  - 风扇控制界面（显示和控制）

### 2. 温度管控 风扇控制系统
- **功能**：基于GPIO的硬件风扇控制，根据CPU温度自动调节
- **特性**：
  - 智能温度控制算法
  - 高温持续模式 + 低温循环模式
  - 与CPUWeb系统深度集成

## 系统架构关系

```
┌─────────────────────────────────────────┐
│           CPUWeb 监控平台                │
├─────────────────────────────────────────┤
│  ┌─────────────┐   ┌─────────────────┐  │
│  │ 系统监控界面 │   │ 风扇控制界面    │  │
│  │             │   │                 │  │
│  └─────────────┘   └─────────────────┘  │
└─────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────┐
│        API通信 (HTTP)                  │
└─────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────┐
│          温度管控 风扇控制              │
│  ┌─────────────┐   ┌─────────────────┐  │
│  │ 温度传感器   │   │ GPIO风扇控制   │  │
│  │ (/sys/...)  │   │ (BCM GPIO 14) │  │
│  └─────────────┘   └─────────────────┘  │
└─────────────────────────────────────────┘
```

### 集成特性

1. **双向通信**：
   - CPUWeb提供Web界面显示风扇状态
   - 温度管控程序通过API向CPUWeb同步状态

2. **控制协议**：
   - 温度管控程序通过 `http://localhost:9001/api/fan/control_event` 向CPUWeb同步风扇开关事件
   - CPUWeb通过 `http://localhost:9001/api/fan/mode` 和 `http://localhost:9001/api/fan/status` 控制风扇

3. **协同工作**：
   - 温度管控程序负责硬件层面的温度监控和风扇控制
   - CPUWeb提供用户友好的Web界面和手动控制功能

## 部署说明

### CPUWeb (端口 9001)
- 主监控界面：http://[树莓派IP]:9001
- 文件管理：http://[树莓派IP]:9001/filemanager

### 温度管控
- 自动运行作为系统服务
- 与CPUWeb通信以同步风扇状态

## 使用场景

- 树莓派服务器的系统监控
- 温度自动控制（防止过热）
- 远程管理（通过Web界面）
- 系统性能优化

## 技术栈

- **后端**：Python + Flask
- **前端**：HTML/CSS/JavaScript
- **通信**：HTTP API (REST)
- **硬件接口**：GPIO (树莓派)

---

*版本: 1.0*  
*作者: BI9BJV*  
*日期: 2025年12月*